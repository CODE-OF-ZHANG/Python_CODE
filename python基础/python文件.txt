5.2问题二模型的建立与求解
5.2.1数据预处理
根据含沙量和水流量计算出不同时间下的水沙通量。
5.2.2模型建立与求解
在求解这个问题之前，要搞清楚什么是水沙通量。水沙通量是地学和水文学领域的一个重要概念，用来描述水流中所携带的沉积物或泥沙的量和速度。由定义我
们容易知道，水沙通量与水流量以及含沙量直接相关，因此我们不难给出水沙通量
的计算公式：
水沙通量(S)=Q*C
S表示水沙通量，单位时间内的千克数来(kgs)表示。
Q表示水流量，以每秒的立方米(ms)来表示。
C表示含沙量，以质量比例或体积比例表示，千克每立方米(kgm)
    在得到水沙通量之后，使用滑动窗口分析方法对水沙通量的突变性进行分析。
此处我们设置的滑动窗口大小为10，从16年1月1日开始向后移动，在每个窗口
内计算水沙通量的平均值和标准差。设置的阈值为2.8，并选取均值来检测突变
画出箱线图米显示出我们的数据分布，和突变点做一个对照。我们得到了1644个
突变点，下图中展示了部分的突变点。
进一步对水沙通量的季节性和周期性进行分析，这里我们使用了季节性分解，
得到趋势分量、季节分量以及残差分量，利用这些分量来分析水沙通量的季节性和
周期性。

通过分析水沙通量的突变性、季节性和周期性，来得出水沙通量的变化规律。

5.2.3结果分析
    下面对结果进行分析，首先使用了滑动窗口分析，下图展示了突变点在全体数据在时间轴上的一个分布，用灰线标示出来，不难看出突变点比较均匀的分布在时
间轴上。


用箱线图来分析6年内的数据的部分情况，结果如下所示。不难看出存在着大量水沙通量远高于中位数的值，与突变点数量有一个对应。

出现如此密集的突变点且均匀分布在时间轴的原因是由于较小的趋势或周期性成分而被掩盖季节性因素以及周期性因素对数据的影响原高于突变性，从而导致寻突变点分布比较均匀的情况

下面我们对水沙通量的季节性和周期性进行分析。下图呈现了水沙通量季节性
分解后的结果，最上面的子图表示的水沙通量的原始数据，中间的图是趋势分量，
最底下的图表示的是季节性分量。

不难看出，前两年的季节性因素影响较小，对应的水沙通量原始数据也相较后
几年较低，说明了在18年之后，可能发生过重大自然灾害或其他类似原因，导致
了水沙通量在汛期大幅上升。

下一步是周期性变化。水沙通量按年份呈现出周期变化的趋势，当汛期显著提
升，到春冬季节又会恢复到一个较低水平。

最后总结一下水沙通量的变化规律，水沙通量随机季节变化呈现出周期性变化，
突变性受季节性变化影响较大无法表现的较为良好，也就是说随时问变化，存在突
变幅度较低次数较少的突变，如暴雨等。

5.3问题三模型的建立与求解
5.3.1数据预处理
    为了方便预测分析水文站未来两年水沙通量的变化趋势，需要将时间设置为我
们dataframe的索引，使用pandas中的set index来实现。
对数据进行月平均采样，得到六年来每月的平均水沙通量变化。
    对其进行差分得到平稳化的数据。

5.3.2模型建立与求解
现在我们有了时间顺序排列的水沙通量数据集，下面我们将使用AMA模型，
对未米两年的水沙通量进行预测。首先我们需要确定ARMA模型的AR(p)、I(d)
MA(q)的阶数，即p、d、q的值。此处使用的是auto_ima来确定他们的值。
将水沙通量作为训练集来训练确定好阶数值的ARMA模型，预测730步来预
测未来两年水沙通量变化情况。发现不能得到良好的预测结果，分析原因是因为水
沙通量的季节性变化强烈影响了ARMA模型的预测能力，为了消除这种影响，不
妨按月对水沙通量进行月平均采样，这样的好处是降低了计算成木以及使ARMA
模型学习到水沙通量的季节性变化规律。下面将月采样得到的数据作为训练集来训
练确定好阶数值的ARMA模型，再向后预测24步，米预测未米两年的月平均水
沙通量变化。
    在预测好未来两年水沙通量的变化之后，下面制定未来两年最优的采样监测方
案。采用遗传算法，设置采样监测频率为100，监测天数为730，也就是对这两年
的水沙通量进行监测。最终得到最大程度减少监测成本资源的方案是212天，具体
的监测方案存放在“results”中

5.3.3结果分析
    下图展示了未来两年的水沙通量预测结果有紫色的折线表示，不难看出预测结
果也展现出周期性变化的趋势。红色折线、蓝色折线和绿色折线分别表示季节性分
量、原始数据以及趋势分量。


5.4问题四模型的建立与求解
5.4.1数据预处理
    首先，根据已有的包含水沙通量信息的数据集，将其按月份进行划分成多个子
数据集，其中8月份到次年的5月份作为训练数据集，每年的6-7月份作为对比数
据集。
    其次，对附件2和附件3中的数据进行预处理。需要得到的数据是不同日期下
平均的河底高程的数据。因此，对于附件而，将同一日期的列，包含的河底高程信
息进行填充，根据计算河底间高程公式得到对应的日均河底高程

5.4.2模型建立与求解
    本问题需要研究“调水调沙”的实际效果问题以及河底高程的变化情况。由于
“调水调沙”进在6-7月进行，因此不妨使用剩余月份的数据米对67月份不进行
“调水调沙”的情况下水沙通量变化进行预测，由预测得到的水沙通量和实际进行
了“调水调沙”情况下水沙通量变化情况进行对比，使用DID方法计算得到DID
差异指标，以此来体现“调水调沙”的实际效果。具体得到的DID差异指标存放
在results文件夹中，河底高程同理。
    下面分析对河底高程的影响，在分析之前，首先了解什么是河底高程。河底高
程是指河流底部的垂直高度或海拔高度。直观感觉就是，河底的泥沙随着时间不断
堆积，河底高程就会不断变大。那么河底高程的具体计算公式如下：
河底高程一水位一水深一基准面高度
此处水位表示的是水平面的绝对高度。
由本文的假设，水位的与河底高程是相同基准面，那么公式可以简化如下：
        河底高程=水位一水深
此处水位表示的是水平面的绝对高度。
    由木文的假设，水位的与河底高程是相同基准面，那么公式可以简化如下：
        河底高程=水位一水深
此处水位表示的是水平面的相对基准面的高度。
    下面根据附件2,3提供的数据，利用上述公式是计算得到每日平均的河定高
程。再根据得到的日均河底高程，进行年平均采样得到每年的河底高程数据，用来
预測十年后的河底高程数据

下面对不进行“调水调沙”情况下十年河底高程的变化进行预测，
使用了ARIMA模型进行预测，预测结果表现能力有限是由于得到的河底高程数据量过少，
对其进行年平均采样后严重损失了原有的信总。
